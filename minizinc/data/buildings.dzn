int: NB_TYPES = 21;
set of int: TYPES = 0..NB_TYPES-1;

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Catégories 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

int: CAT_ROAD     = 0;  
int: CAT_HOUSE    = 1;
int: CAT_ENERGY   = 2;
int: CAT_COMMERCE = 3;
set of int: CATS = 0..3;

% Catégorie de chaque TYPE (0..20)
array[TYPES] of int: category_type =
  array1d(TYPES, [
    1, % 0  Sky_big
    1, % 1  Sky_small
    1, % 2  House_01
    1, % 3  House_02
    1, % 4  Residential
    1, % 5  House_03
    2, % 6  Factory
    2, % 7  Windmill
    3, % 8  Auto Service
    3, % 9  Bakery
    3, % 10 Bar
    3, % 11 Books Shop
    3, % 12 Chicken Shop
    3, % 13 Clothing
    3, % 14 Coffee Shop
    3, % 15 Drug Store
    3, % 16 Fast Food
    3, % 17 Fruits Shop
    3, % 18 Gas Station
    3, % 19 Gift Shop
    3  % 20 Super Market
  ]);

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Tailles rectangulaires 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

array[TYPES] of int: sizeX_type =
  array1d(TYPES, [
    14, % 0  Sky_big
    13, % 1  Sky_small
    18, % 2  House_01
    18, % 3  House_02
    16, % 4  Residential
    17, % 5  House_03
    16, % 6  Factory
    6,  % 7  Windmill
    18, % 8  Auto Service
    14, % 9  Bakery
    7,  % 10 Bar
    12, % 11 Books Shop
    11, % 12 Chicken Shop
    12, % 13 Clothing
    19, % 14 Coffee Shop
    11, % 15 Drug Store
    11, % 16 Fast Food
    12, % 17 Fruits Shop
    13, % 18 Gas Station
    11, % 19 Gift Shop
    24  % 20 Super Market
  ]);

array[TYPES] of int: sizeY_type =
  array1d(TYPES, [
    12, % 0  Sky_big
    13, % 1  Sky_small
    13, % 2  House_01
    13, % 3  House_02
    13, % 4  Residential
    14, % 5  House_03
    28, % 6  Factory
    2,  % 7  Windmill
    8,  % 8  Auto Service
    11, % 9  Bakery
    7,  % 10 Bar
    12, % 11 Books Shop
    10, % 12 Chicken Shop
    12, % 13 Clothing
    12, % 14 Coffee Shop
    11, % 15 Drug Store
    10, % 16 Fast Food
    12, % 17 Fruits Shop
    26, % 18 Gas Station
    11, % 19 Gift Shop
    13  % 20 Super Market
  ]);

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Combien d'instances par type ?
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

array[TYPES] of int: nb_par_type =
  array1d(TYPES, [
    % Maisons
    1, % 0  Sky_big
    1, % 1  Sky_small
    1, % 2  House_01
    0, % 3  House_02
    0, % 4  Residential
    1, % 5  House_03

    % Énergie
    1, % 6  Factory
    1, % 7  Windmill

    % Commerce
    0, % 8  Auto Service
    0, % 9  Bakery
    1, % 10 Bar
    1, % 11 Books Shop
    0, % 12 Chicken Shop
    1, % 13 Clothing
    0, % 14 Coffee Shop
    0, % 15 Drug Store
    1, % 16 Fast Food
    0, % 17 Fruits Shop
    1, % 18 Gas Station
    0, % 19 Gift Shop
    1  % 20 Super Market
  ]);

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Bâtiments concrets dérivés des types
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

int: NB_BUILDINGS = sum(t in TYPES)(nb_par_type[t]);
set of int: BATIMENTS = 1..NB_BUILDINGS;

array[BATIMENTS] of int: typeBat =
[
  t
  | t in TYPES,
    k in 1..nb_par_type[t]
];

array[BATIMENTS] of int: sizeX =
[
  sizeX_type[typeBat[b]]
  | b in BATIMENTS
];

array[BATIMENTS] of int: sizeY =
[
  sizeY_type[typeBat[b]]
  | b in BATIMENTS
];